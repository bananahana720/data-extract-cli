# Quality Gate Report

**Generated:** 2026-02-11T18:33:41.306209
**Mode:** default
**Elapsed Time:** 0.44s

## Results

**Overall:** 0/4 checks passed

### Black

⚠️  Black not installed. Run: pip install black

### Ruff

❌ Ruff: Linting violations found
I001 [*] Import block is un-sorted or un-formatted
   --> scripts/migrate_legacy_sessions.py:114:9
    |
113 |       try:
114 | /         from data_extract.api.database import SessionLocal, init_database
115 | |         from data_extract.api.models import Job, SessionRecord
116 | |         from sqlalchemy import select
    | |_____________________________________^
117 |       except Exception:
118 |           return None
    |
help: Organize imports

I001 [*] Import block is un-sorted or un-formatted
  --> scripts/run_refactor_gates.py:4:1
   |
 2 |   """Run milestone refactor gates for deterministic rollout."""
 3 |
 4 | / from __future__ import annotations
 5 | |
 6 | | import os
 7 | | import subprocess
 8 | | import sys
 9 | | import tempfile
10 | | from pathlib import Path
   | |________________________^
   |
help: Organize imports

I001 [*] Import block is un-sorted or un-formatted
  --> scripts/run_test_extractions.py:24:1
   |
22 |   sys.path.insert(0, str(Path(__file__).parent))
23 |
24 | / from examples.minimal_extractor import TextFileExtractor
25 | | from src.extractors import DocxExtractor, PdfExtractor
26 | | from src.formatters import JsonFormatter, MarkdownFormatter
27 | | from src.infrastructure import get_logger
28 | | from src.pipeline import ExtractionPipeline
29 | | from src.processors import ContextLinker, MetadataAggregator, QualityValidator
   | |______________________________________________________________________________^
30 |
31 |   # Try to import optional extractors
   |
help: Organize imports

I001 [*] Import block is un-sorted or un-formatted
 --> src/data_extract/api/database.py:3:1
  |
1 |   """SQLite persistence for local UI/API runtime."""
2 |
3 | / from __future__ import annotations
4 | |
5 | | import os
6 | | from pathlib import Path
7 | |
8 | | from sqlalchemy import create_engine
9 | | from sqlalchemy.orm import DeclarativeBase, sessionmaker
  | |________________________________________________________^
  |
help: Organize imports

I001 [*] Import block is un-sorted or un-formatted
  --> src/data_extract/api/routers/config.py:3:1
   |
 1 |   """Configuration API routes."""
 2 |
 3 | / from __future__ import annotations
 4 | |
 5 | | from datetime import datetime
 6 | |
 7 | | from fastapi import APIRouter, HTTPException
 8 | | from pydantic import BaseModel
 9 | |
10 | | from data_extract.api.database import SessionLocal
11 | | from data_extract.api.models import AppSetting
12 | | from data_extract.cli.config import (
13 | |     PresetManager,
14 | |     load_merged_config,
15 | |     list_presets as list_config_presets,
16 | | )
   | |_^
17 |
18 |   router = APIRouter(prefix="/api/v1/config", tags=["config"])
   |
help: Organize imports

F401 [*] `datetime.datetime` imported but unused
 --> src/data_extract/api/routers/sessions.py:5:22
  |
3 | from __future__ import annotations
4 |
5 | from datetime import datetime
  |                      ^^^^^^^^
6 | from pathlib import Path
  |
help: Remove unused import: `datetime.datetime`

I001 [*] Import block is un-sorted or un-formatted
  --> src/data_extract/api/state.py:3:1
   |
 1 |   """API runtime state: queue + service orchestration."""
 2 |
 3 | / from __future__ import annotations
 4 | |
 5 | | import json
 6 | | import uuid
 7 | | from datetime import datetime
 8 | | from pathlib import Path
 9 | | from typing import Any, Dict
10 | |
11 | | from data_extract.api.database import JOBS_HOME, SessionLocal, init_database
12 | | from data_extract.api.models import Job, JobEvent, JobFile, RetryRun, SessionRecord
13 | | from data_extract.contracts import JobStatus, ProcessJobRequest, RetryRequest
14 | | from data_extract.runtime import LocalJobQueue
15 | | from data_extract.services import JobService, RetryService
16 | | from data_extract.services.pathing import normalized_path_text
17 | | from data_extract.services.persistence_repository import RUNNING_STATUSES, TERMINAL_STATUSES
18 | | from data_extract.services.persistence_repository import PersistenceRepository
19 | | from sqlalchemy import delete
   | |_____________________________^
   |
help: Organize imports

I001 [*] Import block is un-sorted or un-formatted
 --> src/data_extract/cli/__main__.py:3:1
  |
1 |   """Module entrypoint for `python -m data_extract.cli`."""
2 |
3 | / from __future__ import annotations
4 | |
5 | | from data_extract.cli.base import app
  | |_____________________________________^
  |
help: Organize imports

I001 [*] Import block is un-sorted or un-formatted
  --> src/data_extract/services/__init__.py:3:1
   |
 1 |   """Shared service layer used by CLI and API."""
 2 |
 3 | / from .file_discovery_service import FileDiscoveryService
 4 | | from .job_service import JobService
 5 | | from .pathing import normalize_path, source_key_for_path
 6 | | from .pipeline_service import PipelineService
 7 | | from .persistence_repository import PersistenceRepository
 8 | | from .run_config_resolver import RunConfigResolver
 9 | | from .retry_service import RetryService
10 | | from .semantic_orchestration_service import SemanticOrchestrationService
11 | | from .session_service import list_session_summaries, load_session_details
12 | | from .status_service import StatusService
   | |_________________________________________^
13 |
14 |   __all__ = [
   |
help: Organize imports

I001 [*] Import block is un-sorted or un-formatted
  --> src/data_extract/services/job_service.py:3:1
   |
 1 |   """Processing job orchestration service."""
 2 |
 3 | / from __future__ import annotations
 4 | |
 5 | | import hashlib
 6 | | import json
 7 | | import os
 8 | | import uuid
 9 | | from datetime import datetime, timezone
10 | | from pathlib import Path
11 | | from typing import Any, List, Optional
12 | |
13 | | from data_extract.cli.batch import IncrementalProcessor
14 | | from data_extract.cli.exit_codes import determine_exit_code
15 | | from data_extract.cli.session import SessionManager, SessionState
16 | | from data_extract.contracts import (
17 | |     FileFailure,
18 | |     JobStatus,
19 | |     ProcessedFileOutcome,
20 | |     ProcessJobRequest,
21 | |     ProcessJobResult,
22 | |     SemanticArtifact,
23 | |     SemanticOutcome,
24 | | )
25 | | from data_extract.services.file_discovery_service import FileDiscoveryService
26 | | from data_extract.services.pathing import normalized_path_text, source_key_for_path
27 | | from data_extract.services.pipeline_service import PipelineService
28 | | from data_extract.services.persistence_repository import RUNNING_STATUSES, TERMINAL_STATUSES
29 | | from data_extract.services.persistence_repository import PersistenceRepository
30 | | from data_extract.services.run_config_resolver import RunConfigResolver
31 | | from data_extract.services.semantic_orchestration_service import SemanticOrchestrationService
   | |_____________________________________________________________________________________________^
   |
help: Organize imports

F401 [*] `typing.Optional` imported but unused
  --> src/data_extract/services/persistence_repository.py:8:25
   |
 6 | from datetime import datetime
 7 | from pathlib import Path
 8 | from typing import Any, Optional
   |                         ^^^^^^^^
 9 |
10 | TERMINAL_STATUSES = {"completed", "partial", "failed"}
   |
help: Remove unused import: `typing.Optional`

I001 [*] Import block is un-sorted or un-formatted
  --> src/data_extract/services/persistence_repository.py:25:13
   |
23 |               return None
24 |           try:
25 | /             from data_extract.api.database import SessionLocal, init_database
26 | |             from data_extract.api.models import Job, JobFile, SessionRecord
27 | |             from sqlalchemy import func, select
   | |_______________________________________________^
28 |
29 |               init_database()
   |
help: Organize imports

N806 Variable `SessionLocal` in function should be lowercase
  --> src/data_extract/services/persistence_repository.py:42:9
   |
40 |         if deps is None:
41 |             return None
42 |         SessionLocal, Job, _JobFile, _SessionRecord, select, _func = deps
   |         ^^^^^^^^^^^^
43 |         try:
44 |             with SessionLocal() as db:
   |

N806 Variable `Job` in function should be lowercase
  --> src/data_extract/services/persistence_repository.py:42:23
   |
40 |         if deps is None:
41 |             return None
42 |         SessionLocal, Job, _JobFile, _SessionRecord, select, _func = deps
   |                       ^^^
43 |         try:
44 |             with SessionLocal() as db:
   |

N806 Variable `_JobFile` in function should be lowercase
  --> src/data_extract/services/persistence_repository.py:42:28
   |
40 |         if deps is None:
41 |             return None
42 |         SessionLocal, Job, _JobFile, _SessionRecord, select, _func = deps
   |                            ^^^^^^^^
43 |         try:
44 |             with SessionLocal() as db:
   |

N806 Variable `_SessionRecord` in function should be lowercase
  --> src/data_extract/services/persistence_repository.py:42:38
   |
40 |         if deps is None:
41 |             return None
42 |         SessionLocal, Job, _JobFile, _SessionRecord, select, _func = deps
   |                                      ^^^^^^^^^^^^^^
43 |         try:
44 |             with SessionLocal() as db:
   |

N806 Variable `SessionLocal` in function should be lowercase
  --> src/data_extract/services/persistence_repository.py:73:9
   |
71 |         if deps is None:
72 |             return
73 |         SessionLocal, Job, _JobFile, _SessionRecord, _select, _func = deps
   |         ^^^^^^^^^^^^
74 |         try:
75 |             with SessionLocal() as db:
   |

N806 Variable `Job` in function should be lowercase
  --> src/data_extract/services/persistence_repository.py:73:23
   |
71 |         if deps is None:
72 |             return
73 |         SessionLocal, Job, _JobFile, _SessionRecord, _select, _func = deps
   |                       ^^^
74 |         try:
75 |             with SessionLocal() as db:
   |

N806 Variable `_JobFile` in function should be lowercase
  --> src/data_extract/services/persistence_repository.py:73:28
   |
71 |         if deps is None:
72 |             return
73 |         SessionLocal, Job, _JobFile, _SessionRecord, _select, _func = deps
   |                            ^^^^^^^^
74 |         try:
75 |             with SessionLocal() as db:
   |

N806 Variable `_SessionRecord` in function should be lowercase
  --> src/data_extract/services/persistence_repository.py:73:38
   |
71 |         if deps is None:
72 |             return
73 |         SessionLocal, Job, _JobFile, _SessionRecord, _select, _func = deps
   |                                      ^^^^^^^^^^^^^^
74 |         try:
75 |             with SessionLocal() as db:
   |

N806 Variable `SessionLocal` in function should be lowercase
  --> src/data_extract/services/persistence_repository.py:92:9
   |
90 |         if deps is None:
91 |             return 0
92 |         SessionLocal, _Job, JobFile, _SessionRecord, select, func = deps
   |         ^^^^^^^^^^^^
93 |         try:
94 |             with SessionLocal() as db:
   |

N806 Variable `_Job` in function should be lowercase
  --> src/data_extract/services/persistence_repository.py:92:23
   |
90 |         if deps is None:
91 |             return 0
92 |         SessionLocal, _Job, JobFile, _SessionRecord, select, func = deps
   |                       ^^^^
93 |         try:
94 |             with SessionLocal() as db:
   |

N806 Variable `JobFile` in function should be lowercase
  --> src/data_extract/services/persistence_repository.py:92:29
   |
90 |         if deps is None:
91 |             return 0
92 |         SessionLocal, _Job, JobFile, _SessionRecord, select, func = deps
   |                             ^^^^^^^
93 |         try:
94 |             with SessionLocal() as db:
   |

N806 Variable `_SessionRecord` in function should be lowercase
  --> src/data_extract/services/persistence_repository.py:92:38
   |
90 |         if deps is None:
91 |             return 0
92 |         SessionLocal, _Job, JobFile, _SessionRecord, select, func = deps
   |                                      ^^^^^^^^^^^^^^
93 |         try:
94 |             with SessionLocal() as db:
   |

N806 Variable `SessionLocal` in function should be lowercase
   --> src/data_extract/services/persistence_repository.py:114:9
    |
112 |         if deps is None:
113 |             return
114 |         SessionLocal, _Job, _JobFile, SessionRecord, _select, _func = deps
    |         ^^^^^^^^^^^^
115 |         session_id = str(payload.get("session_id") or "")
116 |         if not session_id:
    |

N806 Variable `_Job` in function should be lowercase
   --> src/data_extract/services/persistence_repository.py:114:23
    |
112 |         if deps is None:
113 |             return
114 |         SessionLocal, _Job, _JobFile, SessionRecord, _select, _func = deps
    |                       ^^^^
115 |         session_id = str(payload.get("session_id") or "")
116 |         if not session_id:
    |

N806 Variable `_JobFile` in function should be lowercase
   --> src/data_extract/services/persistence_repository.py:114:29
    |
112 |         if deps is None:
113 |             return
114 |         SessionLocal, _Job, _JobFile, SessionRecord, _select, _func = deps
    |                             ^^^^^^^^
115 |         session_id = str(payload.get("session_id") or "")
116 |         if not session_id:
    |

N806 Variable `SessionRecord` in function should be lowercase
   --> src/data_extract/services/persistence_repository.py:114:39
    |
112 |         if deps is None:
113 |             return
114 |         SessionLocal, _Job, _JobFile, SessionRecord, _select, _func = deps
    |                                       ^^^^^^^^^^^^^
115 |         session_id = str(payload.get("session_id") or "")
116 |         if not session_id:
    |

N806 Variable `SessionLocal` in function should be lowercase
   --> src/data_extract/services/persistence_repository.py:165:9
    |
163 |         if deps is None:
164 |             return None
165 |         SessionLocal, Job, _JobFile, _SessionRecord, select, _func = deps
    |         ^^^^^^^^^^^^
166 |         try:
167 |             with SessionLocal() as db:
    |

N806 Variable `Job` in function should be lowercase
   --> src/data_extract/services/persistence_repository.py:165:23
    |
163 |         if deps is None:
164 |             return None
165 |         SessionLocal, Job, _JobFile, _SessionRecord, select, _func = deps
    |                       ^^^
166 |         try:
167 |             with SessionLocal() as db:
    |

N806 Variable `_JobFile` in function should be lowercase
   --> src/data_extract/services/persistence_repository.py:165:28
    |
163 |         if deps is None:
164 |             return None
165 |         SessionLocal, Job, _JobFile, _SessionRecord, select, _func = deps
    |                            ^^^^^^^^
166 |         try:
167 |             with SessionLocal() as db:
    |

N806 Variable `_SessionRecord` in function should be lowercase
   --> src/data_extract/services/persistence_repository.py:165:38
    |
163 |         if deps is None:
164 |             return None
165 |         SessionLocal, Job, _JobFile, _SessionRecord, select, _func = deps
    |                                      ^^^^^^^^^^^^^^
166 |         try:
167 |             with SessionLocal() as db:
    |

N806 Variable `SessionLocal` in function should be lowercase
   --> src/data_extract/services/persistence_repository.py:187:9
    |
185 |         if deps is None:
186 |             return None
187 |         SessionLocal, _Job, _JobFile, SessionRecord, select, _func = deps
    |         ^^^^^^^^^^^^
188 |         try:
189 |             with SessionLocal() as db:
    |

N806 Variable `_Job` in function should be lowercase
   --> src/data_extract/services/persistence_repository.py:187:23
    |
185 |         if deps is None:
186 |             return None
187 |         SessionLocal, _Job, _JobFile, SessionRecord, select, _func = deps
    |                       ^^^^
188 |         try:
189 |             with SessionLocal() as db:
    |

N806 Variable `_JobFile` in function should be lowercase
   --> src/data_extract/services/persistence_repository.py:187:29
    |
185 |         if deps is None:
186 |             return None
187 |         SessionLocal, _Job, _JobFile, SessionRecord, select, _func = deps
    |                             ^^^^^^^^
188 |         try:
189 |             with SessionLocal() as db:
    |

N806 Variable `SessionRecord` in function should be lowercase
   --> src/data_extract/services/persistence_repository.py:187:39
    |
185 |         if deps is None:
186 |             return None
187 |         SessionLocal, _Job, _JobFile, SessionRecord, select, _func = deps
    |                                       ^^^^^^^^^^^^^
188 |         try:
189 |             with SessionLocal() as db:
    |

I001 [*] Import block is un-sorted or un-formatted
  --> src/data_extract/services/pipeline_service.py:3:1
   |
 1 |   """Core extraction pipeline service shared by CLI and API."""
 2 |
 3 | / from __future__ import annotations
 4 | |
 5 | | import re
 6 | | import time
 7 | | from dataclasses import dataclass, field
 8 | | from pathlib import Path
 9 | | from typing import Dict, Iterable, List
10 | |
11 | | import structlog
12 | | from data_extract.chunk.engine import ChunkingConfig, ChunkingEngine
13 | | from data_extract.core.models import Chunk, Document
14 | | from data_extract.extract import get_extractor
15 | | from data_extract.normalize.config import NormalizationConfig
16 | | from data_extract.normalize.normalizer import Normalizer
17 | | from data_extract.output import OutputWriter
18 | | from data_extract.output.organization import OrganizationStrategy
19 | | from data_extract.services.pathing import normalize_path
   | |________________________________________________________^
   |
help: Organize imports

I001 [*] Import block is un-sorted or un-formatted
  --> tests/conftest.py:15:1
   |
13 |   """
14 |
15 | / import os
16 | | import hashlib
17 | | from dataclasses import dataclass
18 | | from datetime import UTC, datetime
19 | | from pathlib import Path
20 | | from typing import Generator, Tuple
21 | |
22 | | import pytest
23 | |
24 | | # Import greenfield core models for fixtures
25 | | from data_extract.core.models import (
26 | |     ContentBlock,
27 | |     ContentType,
28 | |     Metadata,
29 | |     Position,
30 | |     ProcessingResult,
31 | | )
   | |_^
32 |
33 |   # Legacy compatibility - map brownfield concepts to greenfield
   |
help: Organize imports

I001 [*] Import block is un-sorted or un-formatted
 --> tests/unit/data_extract/contracts/test_models.py:1:1
  |
1 | / from __future__ import annotations
2 | |
3 | | from data_extract.contracts import (
4 | |     JobStatus,
5 | |     ProcessJobRequest,
6 | |     ProcessJobResult,
7 | |     ProcessedFileOutcome,
8 | |     SemanticOutcome,
9 | | )
  | |_^
  |
help: Organize imports

I001 [*] Import block is un-sorted or un-formatted
  --> tests/unit/data_extract/services/test_retry_service.py:1:1
   |
 1 | / from __future__ import annotations
 2 | |
 3 | | import json
 4 | | import os
 5 | | import uuid
 6 | | from datetime import datetime, timezone
 7 | | from pathlib import Path
 8 | |
 9 | | import pytest
10 | |
11 | | from data_extract.cli.session import SessionManager
12 | | from data_extract.contracts import JobStatus
13 | | from data_extract.contracts import RetryRequest
14 | | from data_extract.services import RetryService
   | |______________________________________________^
   |
help: Organize imports

I001 [*] Import block is un-sorted or un-formatted
  --> tests/unit/test_scripts/test_migrate_legacy_sessions.py:1:1
   |
 1 | / from __future__ import annotations
 2 | |
 3 | | import json
 4 | | import os
 5 | | import sqlite3
 6 | | import subprocess
 7 | | import sys
 8 | | import textwrap
 9 | | from datetime import datetime, timezone
10 | | from pathlib import Path
   | |________________________^
   |
help: Organize imports

Found 41 errors.
[*] 17 fixable with the `--fix` option.



### Mypy

⚠️  Mypy not installed. Run: pip install mypy

### Spacy

❌ spaCy model not installed. Run: python -m spacy download en_core_web_md
