{
  "metadata": {
    "timestamp": "2026-02-11T18:33:41.306209",
    "mode": "default",
    "changed_only": false,
    "elapsed_seconds": 0.44
  },
  "results": {
    "black": {
      "passed": false,
      "output": "\u26a0\ufe0f  Black not installed. Run: pip install black"
    },
    "ruff": {
      "passed": false,
      "output": "\u274c Ruff: Linting violations found\nI001 [*] Import block is un-sorted or un-formatted\n   --> scripts/migrate_legacy_sessions.py:114:9\n    |\n113 |       try:\n114 | /         from data_extract.api.database import SessionLocal, init_database\n115 | |         from data_extract.api.models import Job, SessionRecord\n116 | |         from sqlalchemy import select\n    | |_____________________________________^\n117 |       except Exception:\n118 |           return None\n    |\nhelp: Organize imports\n\nI001 [*] Import block is un-sorted or un-formatted\n  --> scripts/run_refactor_gates.py:4:1\n   |\n 2 |   \"\"\"Run milestone refactor gates for deterministic rollout.\"\"\"\n 3 |\n 4 | / from __future__ import annotations\n 5 | |\n 6 | | import os\n 7 | | import subprocess\n 8 | | import sys\n 9 | | import tempfile\n10 | | from pathlib import Path\n   | |________________________^\n   |\nhelp: Organize imports\n\nI001 [*] Import block is un-sorted or un-formatted\n  --> scripts/run_test_extractions.py:24:1\n   |\n22 |   sys.path.insert(0, str(Path(__file__).parent))\n23 |\n24 | / from examples.minimal_extractor import TextFileExtractor\n25 | | from src.extractors import DocxExtractor, PdfExtractor\n26 | | from src.formatters import JsonFormatter, MarkdownFormatter\n27 | | from src.infrastructure import get_logger\n28 | | from src.pipeline import ExtractionPipeline\n29 | | from src.processors import ContextLinker, MetadataAggregator, QualityValidator\n   | |______________________________________________________________________________^\n30 |\n31 |   # Try to import optional extractors\n   |\nhelp: Organize imports\n\nI001 [*] Import block is un-sorted or un-formatted\n --> src/data_extract/api/database.py:3:1\n  |\n1 |   \"\"\"SQLite persistence for local UI/API runtime.\"\"\"\n2 |\n3 | / from __future__ import annotations\n4 | |\n5 | | import os\n6 | | from pathlib import Path\n7 | |\n8 | | from sqlalchemy import create_engine\n9 | | from sqlalchemy.orm import DeclarativeBase, sessionmaker\n  | |________________________________________________________^\n  |\nhelp: Organize imports\n\nI001 [*] Import block is un-sorted or un-formatted\n  --> src/data_extract/api/routers/config.py:3:1\n   |\n 1 |   \"\"\"Configuration API routes.\"\"\"\n 2 |\n 3 | / from __future__ import annotations\n 4 | |\n 5 | | from datetime import datetime\n 6 | |\n 7 | | from fastapi import APIRouter, HTTPException\n 8 | | from pydantic import BaseModel\n 9 | |\n10 | | from data_extract.api.database import SessionLocal\n11 | | from data_extract.api.models import AppSetting\n12 | | from data_extract.cli.config import (\n13 | |     PresetManager,\n14 | |     load_merged_config,\n15 | |     list_presets as list_config_presets,\n16 | | )\n   | |_^\n17 |\n18 |   router = APIRouter(prefix=\"/api/v1/config\", tags=[\"config\"])\n   |\nhelp: Organize imports\n\nF401 [*] `datetime.datetime` imported but unused\n --> src/data_extract/api/routers/sessions.py:5:22\n  |\n3 | from __future__ import annotations\n4 |\n5 | from datetime import datetime\n  |                      ^^^^^^^^\n6 | from pathlib import Path\n  |\nhelp: Remove unused import: `datetime.datetime`\n\nI001 [*] Import block is un-sorted or un-formatted\n  --> src/data_extract/api/state.py:3:1\n   |\n 1 |   \"\"\"API runtime state: queue + service orchestration.\"\"\"\n 2 |\n 3 | / from __future__ import annotations\n 4 | |\n 5 | | import json\n 6 | | import uuid\n 7 | | from datetime import datetime\n 8 | | from pathlib import Path\n 9 | | from typing import Any, Dict\n10 | |\n11 | | from data_extract.api.database import JOBS_HOME, SessionLocal, init_database\n12 | | from data_extract.api.models import Job, JobEvent, JobFile, RetryRun, SessionRecord\n13 | | from data_extract.contracts import JobStatus, ProcessJobRequest, RetryRequest\n14 | | from data_extract.runtime import LocalJobQueue\n15 | | from data_extract.services import JobService, RetryService\n16 | | from data_extract.services.pathing import normalized_path_text\n17 | | from data_extract.services.persistence_repository import RUNNING_STATUSES, TERMINAL_STATUSES\n18 | | from data_extract.services.persistence_repository import PersistenceRepository\n19 | | from sqlalchemy import delete\n   | |_____________________________^\n   |\nhelp: Organize imports\n\nI001 [*] Import block is un-sorted or un-formatted\n --> src/data_extract/cli/__main__.py:3:1\n  |\n1 |   \"\"\"Module entrypoint for `python -m data_extract.cli`.\"\"\"\n2 |\n3 | / from __future__ import annotations\n4 | |\n5 | | from data_extract.cli.base import app\n  | |_____________________________________^\n  |\nhelp: Organize imports\n\nI001 [*] Import block is un-sorted or un-formatted\n  --> src/data_extract/services/__init__.py:3:1\n   |\n 1 |   \"\"\"Shared service layer used by CLI and API.\"\"\"\n 2 |\n 3 | / from .file_discovery_service import FileDiscoveryService\n 4 | | from .job_service import JobService\n 5 | | from .pathing import normalize_path, source_key_for_path\n 6 | | from .pipeline_service import PipelineService\n 7 | | from .persistence_repository import PersistenceRepository\n 8 | | from .run_config_resolver import RunConfigResolver\n 9 | | from .retry_service import RetryService\n10 | | from .semantic_orchestration_service import SemanticOrchestrationService\n11 | | from .session_service import list_session_summaries, load_session_details\n12 | | from .status_service import StatusService\n   | |_________________________________________^\n13 |\n14 |   __all__ = [\n   |\nhelp: Organize imports\n\nI001 [*] Import block is un-sorted or un-formatted\n  --> src/data_extract/services/job_service.py:3:1\n   |\n 1 |   \"\"\"Processing job orchestration service.\"\"\"\n 2 |\n 3 | / from __future__ import annotations\n 4 | |\n 5 | | import hashlib\n 6 | | import json\n 7 | | import os\n 8 | | import uuid\n 9 | | from datetime import datetime, timezone\n10 | | from pathlib import Path\n11 | | from typing import Any, List, Optional\n12 | |\n13 | | from data_extract.cli.batch import IncrementalProcessor\n14 | | from data_extract.cli.exit_codes import determine_exit_code\n15 | | from data_extract.cli.session import SessionManager, SessionState\n16 | | from data_extract.contracts import (\n17 | |     FileFailure,\n18 | |     JobStatus,\n19 | |     ProcessedFileOutcome,\n20 | |     ProcessJobRequest,\n21 | |     ProcessJobResult,\n22 | |     SemanticArtifact,\n23 | |     SemanticOutcome,\n24 | | )\n25 | | from data_extract.services.file_discovery_service import FileDiscoveryService\n26 | | from data_extract.services.pathing import normalized_path_text, source_key_for_path\n27 | | from data_extract.services.pipeline_service import PipelineService\n28 | | from data_extract.services.persistence_repository import RUNNING_STATUSES, TERMINAL_STATUSES\n29 | | from data_extract.services.persistence_repository import PersistenceRepository\n30 | | from data_extract.services.run_config_resolver import RunConfigResolver\n31 | | from data_extract.services.semantic_orchestration_service import SemanticOrchestrationService\n   | |_____________________________________________________________________________________________^\n   |\nhelp: Organize imports\n\nF401 [*] `typing.Optional` imported but unused\n  --> src/data_extract/services/persistence_repository.py:8:25\n   |\n 6 | from datetime import datetime\n 7 | from pathlib import Path\n 8 | from typing import Any, Optional\n   |                         ^^^^^^^^\n 9 |\n10 | TERMINAL_STATUSES = {\"completed\", \"partial\", \"failed\"}\n   |\nhelp: Remove unused import: `typing.Optional`\n\nI001 [*] Import block is un-sorted or un-formatted\n  --> src/data_extract/services/persistence_repository.py:25:13\n   |\n23 |               return None\n24 |           try:\n25 | /             from data_extract.api.database import SessionLocal, init_database\n26 | |             from data_extract.api.models import Job, JobFile, SessionRecord\n27 | |             from sqlalchemy import func, select\n   | |_______________________________________________^\n28 |\n29 |               init_database()\n   |\nhelp: Organize imports\n\nN806 Variable `SessionLocal` in function should be lowercase\n  --> src/data_extract/services/persistence_repository.py:42:9\n   |\n40 |         if deps is None:\n41 |             return None\n42 |         SessionLocal, Job, _JobFile, _SessionRecord, select, _func = deps\n   |         ^^^^^^^^^^^^\n43 |         try:\n44 |             with SessionLocal() as db:\n   |\n\nN806 Variable `Job` in function should be lowercase\n  --> src/data_extract/services/persistence_repository.py:42:23\n   |\n40 |         if deps is None:\n41 |             return None\n42 |         SessionLocal, Job, _JobFile, _SessionRecord, select, _func = deps\n   |                       ^^^\n43 |         try:\n44 |             with SessionLocal() as db:\n   |\n\nN806 Variable `_JobFile` in function should be lowercase\n  --> src/data_extract/services/persistence_repository.py:42:28\n   |\n40 |         if deps is None:\n41 |             return None\n42 |         SessionLocal, Job, _JobFile, _SessionRecord, select, _func = deps\n   |                            ^^^^^^^^\n43 |         try:\n44 |             with SessionLocal() as db:\n   |\n\nN806 Variable `_SessionRecord` in function should be lowercase\n  --> src/data_extract/services/persistence_repository.py:42:38\n   |\n40 |         if deps is None:\n41 |             return None\n42 |         SessionLocal, Job, _JobFile, _SessionRecord, select, _func = deps\n   |                                      ^^^^^^^^^^^^^^\n43 |         try:\n44 |             with SessionLocal() as db:\n   |\n\nN806 Variable `SessionLocal` in function should be lowercase\n  --> src/data_extract/services/persistence_repository.py:73:9\n   |\n71 |         if deps is None:\n72 |             return\n73 |         SessionLocal, Job, _JobFile, _SessionRecord, _select, _func = deps\n   |         ^^^^^^^^^^^^\n74 |         try:\n75 |             with SessionLocal() as db:\n   |\n\nN806 Variable `Job` in function should be lowercase\n  --> src/data_extract/services/persistence_repository.py:73:23\n   |\n71 |         if deps is None:\n72 |             return\n73 |         SessionLocal, Job, _JobFile, _SessionRecord, _select, _func = deps\n   |                       ^^^\n74 |         try:\n75 |             with SessionLocal() as db:\n   |\n\nN806 Variable `_JobFile` in function should be lowercase\n  --> src/data_extract/services/persistence_repository.py:73:28\n   |\n71 |         if deps is None:\n72 |             return\n73 |         SessionLocal, Job, _JobFile, _SessionRecord, _select, _func = deps\n   |                            ^^^^^^^^\n74 |         try:\n75 |             with SessionLocal() as db:\n   |\n\nN806 Variable `_SessionRecord` in function should be lowercase\n  --> src/data_extract/services/persistence_repository.py:73:38\n   |\n71 |         if deps is None:\n72 |             return\n73 |         SessionLocal, Job, _JobFile, _SessionRecord, _select, _func = deps\n   |                                      ^^^^^^^^^^^^^^\n74 |         try:\n75 |             with SessionLocal() as db:\n   |\n\nN806 Variable `SessionLocal` in function should be lowercase\n  --> src/data_extract/services/persistence_repository.py:92:9\n   |\n90 |         if deps is None:\n91 |             return 0\n92 |         SessionLocal, _Job, JobFile, _SessionRecord, select, func = deps\n   |         ^^^^^^^^^^^^\n93 |         try:\n94 |             with SessionLocal() as db:\n   |\n\nN806 Variable `_Job` in function should be lowercase\n  --> src/data_extract/services/persistence_repository.py:92:23\n   |\n90 |         if deps is None:\n91 |             return 0\n92 |         SessionLocal, _Job, JobFile, _SessionRecord, select, func = deps\n   |                       ^^^^\n93 |         try:\n94 |             with SessionLocal() as db:\n   |\n\nN806 Variable `JobFile` in function should be lowercase\n  --> src/data_extract/services/persistence_repository.py:92:29\n   |\n90 |         if deps is None:\n91 |             return 0\n92 |         SessionLocal, _Job, JobFile, _SessionRecord, select, func = deps\n   |                             ^^^^^^^\n93 |         try:\n94 |             with SessionLocal() as db:\n   |\n\nN806 Variable `_SessionRecord` in function should be lowercase\n  --> src/data_extract/services/persistence_repository.py:92:38\n   |\n90 |         if deps is None:\n91 |             return 0\n92 |         SessionLocal, _Job, JobFile, _SessionRecord, select, func = deps\n   |                                      ^^^^^^^^^^^^^^\n93 |         try:\n94 |             with SessionLocal() as db:\n   |\n\nN806 Variable `SessionLocal` in function should be lowercase\n   --> src/data_extract/services/persistence_repository.py:114:9\n    |\n112 |         if deps is None:\n113 |             return\n114 |         SessionLocal, _Job, _JobFile, SessionRecord, _select, _func = deps\n    |         ^^^^^^^^^^^^\n115 |         session_id = str(payload.get(\"session_id\") or \"\")\n116 |         if not session_id:\n    |\n\nN806 Variable `_Job` in function should be lowercase\n   --> src/data_extract/services/persistence_repository.py:114:23\n    |\n112 |         if deps is None:\n113 |             return\n114 |         SessionLocal, _Job, _JobFile, SessionRecord, _select, _func = deps\n    |                       ^^^^\n115 |         session_id = str(payload.get(\"session_id\") or \"\")\n116 |         if not session_id:\n    |\n\nN806 Variable `_JobFile` in function should be lowercase\n   --> src/data_extract/services/persistence_repository.py:114:29\n    |\n112 |         if deps is None:\n113 |             return\n114 |         SessionLocal, _Job, _JobFile, SessionRecord, _select, _func = deps\n    |                             ^^^^^^^^\n115 |         session_id = str(payload.get(\"session_id\") or \"\")\n116 |         if not session_id:\n    |\n\nN806 Variable `SessionRecord` in function should be lowercase\n   --> src/data_extract/services/persistence_repository.py:114:39\n    |\n112 |         if deps is None:\n113 |             return\n114 |         SessionLocal, _Job, _JobFile, SessionRecord, _select, _func = deps\n    |                                       ^^^^^^^^^^^^^\n115 |         session_id = str(payload.get(\"session_id\") or \"\")\n116 |         if not session_id:\n    |\n\nN806 Variable `SessionLocal` in function should be lowercase\n   --> src/data_extract/services/persistence_repository.py:165:9\n    |\n163 |         if deps is None:\n164 |             return None\n165 |         SessionLocal, Job, _JobFile, _SessionRecord, select, _func = deps\n    |         ^^^^^^^^^^^^\n166 |         try:\n167 |             with SessionLocal() as db:\n    |\n\nN806 Variable `Job` in function should be lowercase\n   --> src/data_extract/services/persistence_repository.py:165:23\n    |\n163 |         if deps is None:\n164 |             return None\n165 |         SessionLocal, Job, _JobFile, _SessionRecord, select, _func = deps\n    |                       ^^^\n166 |         try:\n167 |             with SessionLocal() as db:\n    |\n\nN806 Variable `_JobFile` in function should be lowercase\n   --> src/data_extract/services/persistence_repository.py:165:28\n    |\n163 |         if deps is None:\n164 |             return None\n165 |         SessionLocal, Job, _JobFile, _SessionRecord, select, _func = deps\n    |                            ^^^^^^^^\n166 |         try:\n167 |             with SessionLocal() as db:\n    |\n\nN806 Variable `_SessionRecord` in function should be lowercase\n   --> src/data_extract/services/persistence_repository.py:165:38\n    |\n163 |         if deps is None:\n164 |             return None\n165 |         SessionLocal, Job, _JobFile, _SessionRecord, select, _func = deps\n    |                                      ^^^^^^^^^^^^^^\n166 |         try:\n167 |             with SessionLocal() as db:\n    |\n\nN806 Variable `SessionLocal` in function should be lowercase\n   --> src/data_extract/services/persistence_repository.py:187:9\n    |\n185 |         if deps is None:\n186 |             return None\n187 |         SessionLocal, _Job, _JobFile, SessionRecord, select, _func = deps\n    |         ^^^^^^^^^^^^\n188 |         try:\n189 |             with SessionLocal() as db:\n    |\n\nN806 Variable `_Job` in function should be lowercase\n   --> src/data_extract/services/persistence_repository.py:187:23\n    |\n185 |         if deps is None:\n186 |             return None\n187 |         SessionLocal, _Job, _JobFile, SessionRecord, select, _func = deps\n    |                       ^^^^\n188 |         try:\n189 |             with SessionLocal() as db:\n    |\n\nN806 Variable `_JobFile` in function should be lowercase\n   --> src/data_extract/services/persistence_repository.py:187:29\n    |\n185 |         if deps is None:\n186 |             return None\n187 |         SessionLocal, _Job, _JobFile, SessionRecord, select, _func = deps\n    |                             ^^^^^^^^\n188 |         try:\n189 |             with SessionLocal() as db:\n    |\n\nN806 Variable `SessionRecord` in function should be lowercase\n   --> src/data_extract/services/persistence_repository.py:187:39\n    |\n185 |         if deps is None:\n186 |             return None\n187 |         SessionLocal, _Job, _JobFile, SessionRecord, select, _func = deps\n    |                                       ^^^^^^^^^^^^^\n188 |         try:\n189 |             with SessionLocal() as db:\n    |\n\nI001 [*] Import block is un-sorted or un-formatted\n  --> src/data_extract/services/pipeline_service.py:3:1\n   |\n 1 |   \"\"\"Core extraction pipeline service shared by CLI and API.\"\"\"\n 2 |\n 3 | / from __future__ import annotations\n 4 | |\n 5 | | import re\n 6 | | import time\n 7 | | from dataclasses import dataclass, field\n 8 | | from pathlib import Path\n 9 | | from typing import Dict, Iterable, List\n10 | |\n11 | | import structlog\n12 | | from data_extract.chunk.engine import ChunkingConfig, ChunkingEngine\n13 | | from data_extract.core.models import Chunk, Document\n14 | | from data_extract.extract import get_extractor\n15 | | from data_extract.normalize.config import NormalizationConfig\n16 | | from data_extract.normalize.normalizer import Normalizer\n17 | | from data_extract.output import OutputWriter\n18 | | from data_extract.output.organization import OrganizationStrategy\n19 | | from data_extract.services.pathing import normalize_path\n   | |________________________________________________________^\n   |\nhelp: Organize imports\n\nI001 [*] Import block is un-sorted or un-formatted\n  --> tests/conftest.py:15:1\n   |\n13 |   \"\"\"\n14 |\n15 | / import os\n16 | | import hashlib\n17 | | from dataclasses import dataclass\n18 | | from datetime import UTC, datetime\n19 | | from pathlib import Path\n20 | | from typing import Generator, Tuple\n21 | |\n22 | | import pytest\n23 | |\n24 | | # Import greenfield core models for fixtures\n25 | | from data_extract.core.models import (\n26 | |     ContentBlock,\n27 | |     ContentType,\n28 | |     Metadata,\n29 | |     Position,\n30 | |     ProcessingResult,\n31 | | )\n   | |_^\n32 |\n33 |   # Legacy compatibility - map brownfield concepts to greenfield\n   |\nhelp: Organize imports\n\nI001 [*] Import block is un-sorted or un-formatted\n --> tests/unit/data_extract/contracts/test_models.py:1:1\n  |\n1 | / from __future__ import annotations\n2 | |\n3 | | from data_extract.contracts import (\n4 | |     JobStatus,\n5 | |     ProcessJobRequest,\n6 | |     ProcessJobResult,\n7 | |     ProcessedFileOutcome,\n8 | |     SemanticOutcome,\n9 | | )\n  | |_^\n  |\nhelp: Organize imports\n\nI001 [*] Import block is un-sorted or un-formatted\n  --> tests/unit/data_extract/services/test_retry_service.py:1:1\n   |\n 1 | / from __future__ import annotations\n 2 | |\n 3 | | import json\n 4 | | import os\n 5 | | import uuid\n 6 | | from datetime import datetime, timezone\n 7 | | from pathlib import Path\n 8 | |\n 9 | | import pytest\n10 | |\n11 | | from data_extract.cli.session import SessionManager\n12 | | from data_extract.contracts import JobStatus\n13 | | from data_extract.contracts import RetryRequest\n14 | | from data_extract.services import RetryService\n   | |______________________________________________^\n   |\nhelp: Organize imports\n\nI001 [*] Import block is un-sorted or un-formatted\n  --> tests/unit/test_scripts/test_migrate_legacy_sessions.py:1:1\n   |\n 1 | / from __future__ import annotations\n 2 | |\n 3 | | import json\n 4 | | import os\n 5 | | import sqlite3\n 6 | | import subprocess\n 7 | | import sys\n 8 | | import textwrap\n 9 | | from datetime import datetime, timezone\n10 | | from pathlib import Path\n   | |________________________^\n   |\nhelp: Organize imports\n\nFound 41 errors.\n[*] 17 fixable with the `--fix` option.\n\n",
      "command": "ruff check src/ tests/ scripts/"
    },
    "mypy": {
      "passed": false,
      "output": "\u26a0\ufe0f  Mypy not installed. Run: pip install mypy"
    },
    "spacy": {
      "passed": false,
      "output": "\u274c spaCy model not installed. Run: python -m spacy download en_core_web_md"
    }
  }
}
